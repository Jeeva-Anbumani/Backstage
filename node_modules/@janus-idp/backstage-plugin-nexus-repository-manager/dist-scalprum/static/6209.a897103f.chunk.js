"use strict";(self.webpackChunkjanus_idp_backstage_plugin_nexus_repository_manager=self.webpackChunkjanus_idp_backstage_plugin_nexus_repository_manager||[]).push([[6209],{76209:(e,t,n)=>{n.r(t),n.d(t,{AnalyticsContext:()=>I,FeatureFlagState:()=>S,SessionState:()=>p,alertApiRef:()=>y,analyticsApiRef:()=>E,appThemeApiRef:()=>A,atlassianAuthApiRef:()=>w,attachComponentData:()=>U,bitbucketAuthApiRef:()=>R,bitbucketServerAuthApiRef:()=>b,configApiRef:()=>x,createApiFactory:()=>V,createApiRef:()=>l,createComponentExtension:()=>fe,createExternalRouteRef:()=>ae,createPlugin:()=>be,createReactExtension:()=>he,createRoutableExtension:()=>de,createRouteRef:()=>Q,createSubRouteRef:()=>ne,discoveryApiRef:()=>C,errorApiRef:()=>N,featureFlagsApiRef:()=>k,fetchApiRef:()=>$,getComponentData:()=>q,githubAuthApiRef:()=>f,gitlabAuthApiRef:()=>m,googleAuthApiRef:()=>d,identityApiRef:()=>P,microsoftAuthApiRef:()=>g,oauthRequestApiRef:()=>F,oktaAuthApiRef:()=>h,oneloginAuthApiRef:()=>v,storageApiRef:()=>_,useAnalytics:()=>T,useApi:()=>s,useApiHolder:()=>a,useApp:()=>B,useElementFilter:()=>ve,useRouteRef:()=>se,useRouteRefParams:()=>ce,withApis:()=>c});var r=n(67543),o=n(64821),i=n.n(o);function a(){const e=(0,r.useVersionedContext)("api-context");if(!e)throw new Error("API context is not available");const t=e.atVersion(1);if(!t)throw new Error("ApiContext v1 not available");return t}function s(e){const t=a().get(e);if(!t)throw new Error(`No implementation available for ${e}`);return t}function c(e){return function(t){const n=n=>{const r=a(),o={};for(const t in e)if(e.hasOwnProperty(t)){const n=e[t],i=r.get(n);if(!i)throw new Error(`No implementation available for ${n}`);o[t]=i}return i().createElement(t,{...n,...o})},r=t.displayName||t.name||"Component";return n.displayName=`withApis(${r})`,n}}class u{constructor(e){if(this.config=e,!e.id.split(".").flatMap((e=>e.split("-"))).every((e=>e.match(/^[a-z][a-z0-9]*$/))))throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${e.id}'`)}get id(){return this.config.id}get T(){throw new Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function l(e){return new u(e)}var p=(e=>(e.SignedIn="SignedIn",e.SignedOut="SignedOut",e))(p||{});const d=l({id:"core.auth.google"}),f=l({id:"core.auth.github"}),h=l({id:"core.auth.okta"}),m=l({id:"core.auth.gitlab"}),g=l({id:"core.auth.microsoft"}),v=l({id:"core.auth.onelogin"}),R=l({id:"core.auth.bitbucket"}),b=l({id:"core.auth.bitbucket-server"}),w=l({id:"core.auth.atlassian"}),y=l({id:"core.alert"}),E=l({id:"core.analytics"}),A=l({id:"core.apptheme"}),x=l({id:"core.config"}),C=l({id:"core.discovery"}),N=l({id:"core.error"});var S=(e=>(e[e.None=0]="None",e[e.Active=1]="Active",e))(S||{});const k=l({id:"core.featureflags"}),$=l({id:"core.fetch"}),P=l({id:"core.identity"}),F=l({id:"core.oauthrequest"}),_=l({id:"core.storage"});var O=n(77305);const G=(0,r.createVersionedContext)("analytics-context"),j=()=>{const e=(0,o.useContext)(G);if(void 0===e)return{routeRef:"unknown",pluginId:"root",extension:"App"};const t=e.atVersion(1);if(void 0===t)throw new Error("No context found for version 1.");return t},I=e=>{const{attributes:t,children:n}=e,o={...j(),...t},a=(0,r.createVersionedValueMap)({1:o});return i().createElement(G.Provider,{value:a},n)};function V(e,t){return"id"in e?{api:e,deps:{},factory:()=>t}:e}const D=(0,r.getOrCreateGlobalSingleton)("core-plugin-api:analytics-tracker-events",(()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1}))),M="_ROUTABLE-EXTENSION-RENDERED";class z{constructor(e,t={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=e,this.context=t,D.beforeUnloadRegistered||(addEventListener("beforeunload",(()=>{D.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...D.mostRecentGatheredNavigation,...D.mostRecentRoutableExtensionRender}),D.mostRecentGatheredNavigation=void 0,D.mostRecentRoutableExtensionRender=void 0)}),{once:!0,passive:!0}),D.beforeUnloadRegistered=!0)}setContext(e){this.context=e}captureEvent(e,t,{value:n,attributes:r}={}){const{_routeNodeType:o,...i}=this.context;if(e!==M){if(D.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...D.mostRecentGatheredNavigation,...D.mostRecentRoutableExtensionRender})}catch(e){console.warn("Error during analytics event capture. %o",e)}D.mostRecentGatheredNavigation=void 0,D.mostRecentRoutableExtensionRender=void 0}if("navigate"!==e||"gathered"!==o||"root"!==i.pluginId)try{this.analyticsApi.captureEvent({action:e,subject:t,value:n,attributes:r,context:i})}catch(e){console.warn("Error during analytics event capture. %o",e)}else D.mostRecentGatheredNavigation={action:e,subject:t,value:n,attributes:r,context:i}}else D.mostRecentGatheredNavigation&&(D.mostRecentRoutableExtensionRender={context:{...i,extension:"App"}})}}function T(){const e=(0,o.useRef)(null),t=j(),n=function(){try{return s(E)}catch{return{captureEvent:()=>{}}}}(),r=(null===e.current&&(e.current=new z(n)),e.current);return r.setContext(t),r}const B=()=>{const e=(0,r.useVersionedContext)("app-context");if(!e)throw new Error("App context is not available");const t=e.atVersion(1);if(!t)throw new Error("AppContext v1 not available");return t},W=(0,r.getOrCreateGlobalSingleton)("component-data-store",(()=>new WeakMap)),L="__backstage_data";function U(e,t,n){var r;const o=e;let i=null!=(r=o[L])?r:W.get(e);if(i||(i={map:new Map},Object.defineProperty(o,L,{enumerable:!1,configurable:!0,writable:!1,value:i}),W.set(e,i)),i.map.has(t)){const n=e.displayName||e.name;throw new Error(`Attempted to attach duplicate data "${t}" to component "${n}"`)}i.map.set(t,n)}function q(e,t){var n;if(!e)return;const r=e.type;if(!r)return;const o=null!=(n=r[L])?n:W.get(r);return o?o.map.get(t):void 0}const H=(0,r.getOrCreateGlobalSingleton)("route-ref-type",(()=>Symbol("route-ref-type")));var X,J=Object.defineProperty;class K{constructor(e,t){var n;this.id=e,this.params=t,((e,t,n)=>{t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(n=X)?n+"":n,"absolute")}get title(){return this.id}toString(){return`routeRef{type=absolute,id=${this.id}}`}}function Q(e){var t;return new K(e.id,null!=(t=e.params)?t:[])}X=H;var Y,Z=Object.defineProperty;const ee=/^\w+$/;class te{constructor(e,t,n,r){var o;this.id=e,this.path=t,this.parent=n,this.params=r,((e,t,n)=>{t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(o=Y)?o+"":o,"sub")}toString(){return`routeRef{type=sub,id=${this.id}}`}}function ne(e){const{id:t,path:n,parent:r}=e,o=n.split("/").filter((e=>e.startsWith(":"))).map((e=>e.substring(1))),i=[...r.params,...o];if(r.params.some((e=>o.includes(e))))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!n.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${n}'`);if(n.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${n}'`);for(const e of o)if(!ee.test(e))throw new Error(`SubRouteRef path has invalid param, got '${e}'`);return new te(t,n,r,i)}Y=H;var re,oe=Object.defineProperty;class ie{constructor(e,t,n){var r;this.id=e,this.params=t,this.optional=n,((e,t,n)=>{t in e?oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(r=re)?r+"":r,"external")}toString(){return`routeRef{type=external,id=${this.id}}`}}function ae(e){var t;return new ie(e.id,null!=(t=e.params)?t:[],Boolean(e.optional))}function se(e){const{pathname:t}=(0,O.useLocation)(),n=(0,r.useVersionedContext)("routing-context");if(!n)throw new Error("Routing context is not available");const i=n.atVersion(1),a=(0,o.useMemo)((()=>i&&i.resolve(e,{pathname:t})),[i,e,t]);if(!n)throw new Error("useRouteRef used outside of routing context");if(!i)throw new Error("RoutingContext v1 not available");const s="optional"in e&&e.optional;if(!a&&!s)throw new Error(`No path for ${e}`);return a}function ce(e){return(0,O.useParams)()}re=H;var ue=Object.defineProperty,le=(e,t,n)=>(((e,t,n)=>{t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class pe extends i().Component{constructor(){super(...arguments),le(this,"state",{error:void 0}),le(this,"handleErrorReset",(()=>{this.setState({error:void 0})}))}static getDerivedStateFromError(e){return{error:e}}render(){const{error:e}=this.state,{app:t,plugin:n}=this.props,{ErrorBoundaryFallback:r}=t.getComponents();return e?i().createElement(r,{error:e,resetError:this.handleErrorReset,plugin:n}):this.props.children}}function de(e){const{component:t,mountPoint:n,name:r}=e;return he({component:{lazy:()=>t().then((e=>{const t=t=>{const r=T();try{se(n)}catch(e){if("object"==typeof e&&null!==e){const{message:t}=e;if("string"==typeof t&&t.startsWith("No path for "))throw new Error(`Routable extension component with mount point ${n} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw e}return(0,o.useEffect)((()=>{r.captureEvent(M,"")}),[r]),i().createElement(e,{...t})},a=r||e.displayName||e.name||"LazyComponent";return t.displayName=`RoutableExtension(${a})`,t}),(e=>t=>{const n=B(),{BootErrorPage:r}=n.getComponents();return i().createElement(r,{step:"load-chunk",error:e})}))},data:{"core.mountPoint":n},name:r})}function fe(e){const{component:t,name:n}=e;return he({component:t,name:n})}function he(e){const{data:t={},name:n}=e;let r;if(n||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name."),"lazy"in e.component){const t=e.component.lazy;r=(0,o.lazy)((()=>t().then((e=>({default:e})))))}else r=e.component.sync;const a=n||r.displayName||r.name||"Component";return{expose(e){const s=a=>{const s=B(),{Progress:c}=s.getComponents(),u=null==t?void 0:t["core.mountPoint"];return i().createElement(o.Suspense,{fallback:i().createElement(c,null)},i().createElement(pe,{app:s,plugin:e},i().createElement(I,{attributes:{pluginId:e.getId(),...n&&{extension:n},...u&&{routeRef:u.id}}},i().createElement(r,{...a}))))};U(s,"core.plugin",e),U(s,"core.extensionName",n);for(const[e,n]of Object.entries(t))U(s,e,n);return s.displayName=`Extension(${a})`,s}}}function me(e,t,n,r){return o.Children.toArray(e).flatMap((e=>{if(!(0,o.isValidElement)(e))return[];if(e.type===o.Fragment)return me(e.props.children,t,n,r);if(q(e,"core.featureFlagged")){const o=e.props;return("with"in o?t.isActive(o.with):!t.isActive(o.without))?me(e.props.children,t,n,r):[]}if(void 0===n||n(e))return[e];if(r)throw new Error(r);return me(e.props.children,t,n,r)}))}class ge{constructor(e,t){this.node=e,this.featureFlagsApi=t}selectByComponentData(e){const t=me(this.node,this.featureFlagsApi,(t=>void 0!==q(t,e.key)),e.withStrictError);return new ge(t,this.featureFlagsApi)}findComponentData(e){return me(this.node,this.featureFlagsApi,(t=>void 0!==q(t,e.key))).map((t=>q(t,e.key))).filter((e=>void 0!==e))}getElements(){return me(this.node,this.featureFlagsApi)}}function ve(e,t,n=[]){const r=s(k),i=new ge(e,r);return(0,o.useMemo)((()=>t(i)),[e,...n])}class Re{constructor(e){this.config=e}getId(){return this.config.id}getApis(){var e;return null!=(e=this.config.apis)?e:[]}getFeatureFlags(){var e,t;return null!=(t=null==(e=this.config.featureFlags)?void 0:e.slice())?t:[]}get routes(){var e;return null!=(e=this.config.routes)?e:{}}get externalRoutes(){var e;return null!=(e=this.config.externalRoutes)?e:{}}provide(e){return e.expose(this)}toString(){return`plugin{${this.config.id}}`}}function be(e){return new Re(e)}}}]);
//# sourceMappingURL=6209.a897103f.chunk.js.map